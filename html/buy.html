<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buy</title>
    <link rel="stylesheet" href="/css/buy.css" />
    <link rel="stylesheet" href="/css/global/navbar.css" />
    <link rel="stylesheet" href="/css/global/footer-game.css" />
  </head>
  <body>
    <header>
      <div class="top">
        <a href="/">
          <img src="/img/coin.png" class="coin" />
        </a>
        <a href="/buy.html">
          <div id="money" class="money">
            <p id="coin" class="coins"></p>
          </div>
        </a>
        <a href="/profile.html">
          <input type="image" class="profile-image" id="profile-image" alt="Profile" src="" />
        </a>
      </div>
    </header>

    <img src="/img/cloud/buy.png" class="center-cloud" />
    
    <div class="container--controls">
      <button class="button1">-</button>
      <div class="container--buy">
        <p class="input--win">100.000</p>
      </div>
      <button class="button2">+</button>
    </div>

    <button class="button--buy"></button>

    <footer>
      <img src="/img/nuages-background.png" class="bottom-image" />
    </footer>

    <script>      
      async function getBalance(pseudo) {
        const response = await fetch(`/api/getCoins?pseudo=${pseudo}`);
        const data = await response.json();

        document.getElementById('coin').innerHTML = data.coins;
      }
      
      document.addEventListener('DOMContentLoaded', () => {
        const profileImage = localStorage.getItem('profilePicture');
        getBalance(localStorage.getItem("pseudo"))

        if (profileImage) {
          document.getElementById('profile-image').src = profileImage;
        }
      });
    </script>
  </body>
</html>
